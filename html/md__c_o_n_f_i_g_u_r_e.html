<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>liboqs: Options for configuring liboqs builds</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">liboqs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Options for configuring liboqs builds </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following options can be passed to CMake before the build file generation process to customize the way liboqs is built. The syntax for doing so is: <code>cmake .. [ARGS] [-D&lt;OPTION_NAME&gt;=&lt;OPTION_VALUE&gt;]...</code>, where <code>&lt;OPTON_NAME&gt;</code> is:</p>
<ul>
<li><a href="#BUILD_SHARED_LIBS">BUILD_SHARED_LIBS</a></li>
<li><a href="#CMAKE_BUILD_TYPE">CMAKE_BUILD_TYPE</a></li>
<li><a href="#CMAKE_INSTALL_PREFIX">CMAKE_INSTALL_PREFIX</a></li>
<li><a href="#OQS_ALGS_ENABLED">OQS_ALGS_ENABLED</a></li>
<li><a href="#OQS_BUILD_ONLY_LIB">OQS_BUILD_ONLY_LIB</a></li>
<li><a href="#OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG/OQS_ENABLE_SIG_STFL_ALG">OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG/OQS_ENABLE_SIG_STFL_ALG</a></li>
<li><a href="#OQS_MINIMAL_BUILD">OQS_MINIMAL_BUILD</a></li>
<li><a href="#OQS_DIST_BUILD">OQS_DIST_BUILD</a></li>
<li><a href="#OQS_USE_CPUFEATURE_INSTRUCTIONS">OQS_USE_CPUFEATURE_INSTRUCTIONS</a></li>
<li><a href="#OQS_USE_OPENSSL">OQS_USE_OPENSSL</a></li>
<li><a href="#OQS_OPT_TARGET">OQS_OPT_TARGET</a></li>
<li><a href="#OQS_SPEED_USE_ARM_PMU">OQS_SPEED_USE_ARM_PMU</a></li>
<li><a href="#USE_SANITIZER">USE_SANITIZER</a></li>
<li><a href="#OQS_ENABLE_TEST_CONSTANT_TIME">OQS_ENABLE_TEST_CONSTANT_TIME</a></li>
<li><a href="#OQS_STRICT_WARNINGS">OQS_STRICT_WARNINGS</a></li>
<li><a href="#OQS_EMBEDDED_BUILD">OQS_EMBEDDED_BUILD</a></li>
<li><a href="#OQS_LIBJADE_BUILD">OQS_LIBJADE_BUILD</a></li>
<li><a href="#OQS_ENABLE_LIBJADE_KEM_ALG/OQS_ENABLE_LIBJADE_SIG_ALG">OQS_ENABLE_LIBJADE_KEM_ALG/OQS_ENABLE_LIBJADE_SIG_ALG</a></li>
</ul>
<h1>BUILD_SHARED_LIBS</h1>
<p>Can be set to <code>ON</code> or <code>OFF</code>. When <code>ON</code>, liboqs is built as a shared library.</p>
<p><b>Default</b>: <code>OFF</code>.</p>
<p>This means liboqs is built as a static library by default.</p>
<h1>CMAKE_BUILD_TYPE</h1>
<p>Can be set to the following values:</p>
<ul>
<li><code>Debug</code>: This turns off all compiler optimizations and produces debugging information. When the compiler is Clang, the <a href="#USE_SANITIZER">USE_SANITIZER</a> option can also be specified to enable a Clang sanitizer. <b>This value only has effect when the compiler is GCC or Clang</b></li>
<li><code>Release</code>: This compiles code at the <code>O3</code> optimization level, and sets other compiler flags that reduce the size of the binary.</li>
</ul>
<p><b>Default</b>: <code>Release</code>.</p>
<h1>CMAKE_INSTALL_PREFIX</h1>
<p>See the <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_INSTALL_PREFIX.html">CMake documentation</a>.</p>
<h1>OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG/OQS_ENABLE_SIG_STFL_ALG</h1>
<p>Note: <code>ALG</code> in <code>OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG/OQS_ENABLE_SIG_STFL_ALG</code> should be replaced with the specific algorithm name as demonstrated below.</p>
<p>This can be set to <code>ON</code> or <code>OFF</code>, and is <code>ON</code> by default. When <code>OFF</code>, <code>ALG</code> and its code are excluded from the build process. When <code>ON</code>, made available are additional options whereby individual variants of <code>ALG</code> can be excluded from the build process.</p>
<p>For example: if <code>OQS_ENABLE_KEM_BIKE</code> is set to <code>ON</code>, the options <code>OQS_ENABLE_KEM_bike_l1</code>, <code>OQS_ENABLE_KEM_bike_l3</code>, and <code>OQS_ENABLE_KEM_bike_l5</code> are made available (and are set to be <code>ON</code> by default).</p>
<p>To enable <code>XMSS</code> stateful signature, set <code>OQS_ENABLE_SIG_STFL_XMSS</code> to <code>ON</code>, the options <code>OQS_ENABLE_SIG_STFL_xmss_sha256_h10</code> and its variants are also set to be <code>ON</code> by default. Similarly, <code>LMS</code> stateful signature family can also be enabled by setting <code>OQS_ENABLE_SIG_STFL_LMS</code> to <code>ON</code>.</p>
<p>For a full list of such options and their default values, consult <a href="https://github.com/open-quantum-safe/liboqs/blob/master/.CMake/alg_support.cmake">.CMake/alg_support.cmake</a>.</p>
<p><b>Default</b>: Unset.</p>
<h1>OQS_ALGS_ENABLED</h1>
<p>A selected algorithm set is enabled. Possible values are "STD" selecting all algorithms standardized by NIST; "NIST_R4" selecting all algorithms evaluated in round 4 of the NIST PQC competition; "NIST_SIG_ONRAMP" selecting algorithms evaluated in the NIST PQC "onramp" standardization for additional signature schemes; "All" (or any other value) selecting all algorithms integrated into liboqs. Parameter setting "STD" minimizes library size but may require re-running code generator scripts in projects integrating <code>liboqs</code>; e.g., <a href="https://github.com/open-quantum-safe/oqs-provider">oqs-provider</a> and <a href="https://github.com/open-quantum-safe/boringssl">oqs-boringssl</a>.</p>
<p><b>Attention</b>: If you use any predefined value (<code>STD</code> or <code>NIST_R4</code> or <code>NIST_SIG_ONRAMP</code> as of now) for this variable, the values added via <a href="#OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG/OQS_ENABLE_SIG_STFL_ALG">OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG/OQS_ENABLE_SIG_STFL_ALG</a> variables will be ignored.</p>
<p><b>Default</b>: <code>All</code>.</p>
<h1>OQS_BUILD_ONLY_LIB</h1>
<p>Can be <code>ON</code> or <code>OFF</code>. When <code>ON</code>, only liboqs is built, and all the targets: <code>run_tests</code>, <code>gen_docs</code>, and <code>prettyprint</code> are excluded from the build system.</p>
<p><b>Default</b>: <code>OFF</code>.</p>
<h1>OQS_MINIMAL_BUILD</h1>
<p>If set, this defines a semicolon-delimited list of algorithms to be contained in a minimal build of <code>liboqs</code>: Only algorithms explicitly set here are included in a build: For example running <code>cmake -DOQS_MINIMAL_BUILD="KEM_kyber_768;SIG_dilithium_3" ..</code> will build a minimum-size <code>liboqs</code> library only containing support for Kyber768 and Dilithium3.</p>
<p>The full list of identifiers that can be set is listed <a href="https://github.com/open-quantum-safe/liboqs/blob/main/src/kem/kem.h#L34">here for KEM algorithms</a> and <a href="https://github.com/open-quantum-safe/liboqs/blob/f3caccff9e6225e7c50ca27f5ee6e58b7bc74188/src/sig/sig.h#L34">here for Signature algorithms</a>. The default setting is empty, thus including all <a href="https://github.com/open-quantum-safe/liboqs#supported-algorithms">supported algorithms</a> in the build.</p>
<p><b>Default</b>: Unset.</p>
<h1>OQS_DIST_BUILD</h1>
<p>Can be <code>ON</code> or <code>OFF</code>. When <code>ON</code>, build liboqs for distribution. When <code>OFF</code>, build liboqs for use on a single machine.</p>
<p>The library is always built for a particular architecture, either x86-64, ARM32v7, or ARM64v8, depending on the setting of CMAKE_SYSTEM_PROCESSOR. But liboqs contains code that is optimized for micro-architectures as well, e.g. x86-64 with the AVX2 extension.</p>
<p>When built for distribution, the library will run on any CPU of the target architecture. Function calls will be dispatched to micro-architecture optimized routines at run-time using CPU feature detection.</p>
<p>When built for use on a single machine, the library will only include the best available code for the target micro-architecture (see <a href="#OQS_OPT_TARGET">OQS_OPT_TARGET</a>).</p>
<p><b>Default</b>: <code>ON</code>.</p>
<h1>OQS_USE_CPUFEATURE_INSTRUCTIONS</h1>
<p>Note: <code>CPUFEATURE</code> in <code>OQS_USE_CPUFEATURE_INSTRUCTIONS</code> should be replaced with the specific CPU feature as noted below.</p>
<p>These can be set to <code>ON</code> or <code>OFF</code> and take effect if liboqs is built for use on a single machine. By default, the CPU features are automatically determined and set to <code>ON</code> or <code>OFF</code> based on the CPU features available on the build system. The default values can be overridden by providing CMake build options. The available options on x86-64 are: <code>OQS_USE_ADX_INSTRUCTIONS</code>, <code>OQS_USE_AES_INSTRUCTIONS</code>, <code>OQS_USE_AVX_INSTRUCTIONS</code>, <code>OQS_USE_AVX2_INSTRUCTIONS</code>, <code>OQS_USE_AVX512_INSTRUCTIONS</code>, <code>OQS_USE_BMI1_INSTRUCTIONS</code>, <code>OQS_USE_BMI2_INSTRUCTIONS</code>, <code>OQS_USE_PCLMULQDQ_INSTRUCTIONS</code>, <code>OQS_USE_VPCLMULQDQ_INSTRUCTIONS</code>, <code>OQS_USE_POPCNT_INSTRUCTIONS</code>, <code>OQS_USE_SSE_INSTRUCTIONS</code>, <code>OQS_USE_SSE2_INSTRUCTIONS</code> and <code>OQS_USE_SSE3_INSTRUCTIONS</code>. The available options on ARM64v8 are <code>OQS_USE_ARM_AES_INSTRUCTIONS</code>, <code>OQS_USE_ARM_SHA2_INSTRUCTIONS</code>, <code>OQS_USE_ARM_SHA3_INSTRUCTIONS</code> and <code>OQS_USE_ARM_NEON_INSTRUCTIONS</code>.</p>
<p><b>Default</b>: Options valid on the build machine.</p>
<h1>OQS_USE_OPENSSL</h1>
<p>To save size and limit the amount of different cryptographic code bases, it is possible to use OpenSSL as a crypto code provider by setting this configuration option.</p>
<p>This can be set to <code>ON</code> or <code>OFF</code>. When <code>ON</code>, the additional options <code>OQS_USE_AES_OPENSSL</code>, <code>OQS_USE_SHA2_OPENSSL</code>, and <code>OQS_USE_SHA3_OPENSSL</code> are made available to control whether liboqs uses OpenSSL's AES, SHA-2, and SHA-3 implementations.</p>
<p>By default,</p><ul>
<li><code>OQS_USE_AES_OPENSSL</code> is <code>ON</code> (on x86-64 only if <code>OQS_DIST_BUILD</code> and <code>OQS_USE_AES_INSTRUCTIONS</code> are not set)</li>
<li><code>OQS_USE_SHA2_OPENSSL</code> is <code>ON</code></li>
<li><code>OQS_USE_SHA3_OPENSSL</code> is <code>OFF</code>.</li>
</ul>
<p>These default choices have been made to optimize the default performance of all algorithms. Changing them implies performance penalties.</p>
<p>When <code>OQS_USE_OPENSSL</code> is <code>ON</code>, CMake also scans the filesystem to find the minimum version of OpenSSL required by liboqs (which happens to be 1.1.1). The <a href="https://cmake.org/cmake/help/latest/module/FindOpenSSL.html">OPENSSL_ROOT_DIR</a> option can be set to aid CMake in its search.</p>
<p><b>Default</b>: <code>ON</code>.</p>
<h2>OQS_DLOPEN_OPENSSL</h2>
<p>Dynamically load OpenSSL through <code>dlopen</code>. When using liboqs from other cryptographic libraries, hard dependency on OpenSSL is sometimes undesirable. If this option is <code>ON</code>, loading of OpenSSL will be deferred until any of the OpenSSL functions is used.</p>
<p>Only has an effect if the system supports <code>dlopen</code> and ELF binary format, such as Linux or BSD family.</p>
<h1>Stateful Hash Based Signatures</h1>
<p>XMSS and LMS are the two supported Hash-Based Signatures schemes. <code>OQS_ENABLE_SIG_STFL_XMSS</code> and <code>OQS_ENABLE_SIG_STFL_LMS</code> control these algorithms, which are disabled by default. A third variable, <code>OQS_HAZARDOUS_EXPERIMENTAL_ENABLE_SIG_STFL_KEY_SIG_GEN</code>, also controls the ability to generate keys and signatures. This is also disabled by default. Each of these variables can be set to <code>ON</code> or <code>OFF</code>. When all three are <code>ON</code>, stateful signatures are fully functional and can generate key pairs, sign data, and verify signatures. If <code>OQS_HAZARDOUS_EXPERIMENTAL_ENABLE_SIG_STFL_KEY_SIG_GEN</code> is <code>OFF</code> signature verification is the only functional operation.</p>
<p>Standards bodies, such as NIST, recommend that key and signature generation only by done in hardware in order to best enforce the one-time use of secret keys. Keys stored in a file system are extremely susceptible to simultaneous use. When enabled in this library a warning message will be generated by the config process. The name of the configuration variable has been chosen to make every user of this feature aware of its security risks. The OQS team explicitly discourages enabling this variable and reserves the right to remove this feature in future releases if its use causes actual harm. It remains present as long as it is responsibly used as per the stated warnings.</p>
<p>By default,</p><ul>
<li><code>OQS_ENABLE_SIG_STFL_XMSS</code> is <code>OFF</code></li>
<li><code>OQS_ENABLE_SIG_STFL_LMS</code> is <code>OFF</code></li>
<li><code>OQS_HAZARDOUS_EXPERIMENTAL_ENABLE_SIG_STFL_KEY_SIG_GEN</code> is <code>OFF</code>.</li>
</ul>
<p><b>Default</b>: <code>OFF</code>.</p>
<h1>OQS_OPT_TARGET</h1>
<p>An optimization target. Only has an effect if the compiler is GCC or Clang and <code>OQS_DIST_BUILD=OFF</code>. Can take any valid input to the <code>-march</code> (on x86-64) or <code>-mcpu</code> (on ARM32v7 or ARM64v8) option for <code>CMAKE_C_COMPILER</code>. Can also be set to one of the following special values.</p><ul>
<li><code>auto</code>: Use <code>-march=native</code> or <code>-mcpu=native</code> (if the compiler supports it).</li>
<li><code>generic</code>: Use <code>-march=x86-64</code> on x86-64, or <code>-mcpu=cortex-a5</code> on ARM32v7, or <code>-mcpu=cortex-a53</code> on ARM64v8.</li>
</ul>
<p><b>Default</b>: <code>auto</code>.</p>
<h1>OQS_SPEED_USE_ARM_PMU</h1>
<p>Can be <code>ON</code> or <code>OFF</code>. When <code>ON</code>, the benchmarking script will try to use the ARMv8 Performance Monitoring Unit (PMU). This will make cycle counts on ARMv8 platforms significantly more accurate.</p>
<p>In order to use this option, user mode access to the PMU must be enabled via a kernel module. If user mode access is not enabled via the kernel module, benchmarking will throw an <code>Illegal Instruction</code> error. A kernel module that has been found to work on several platforms can be found <a href="https://github.com/mupq/pqax#enable-access-to-performance-counters">here for Linux</a>. Follow the instructions there (i.e., clone the repository, <code>cd enable_ccr</code> and <code>make install</code>) to load the kernel module, after which benchmarking should work. Superuser permissions are required. Linux header files must also be installed on your platform, which may not be present by default.</p>
<p>Note that this option is not known to work on Apple M1 chips.</p>
<p><b>Default</b>: <code>OFF</code>.</p>
<h1>USE_SANITIZER</h1>
<p>This has an effect when the compiler is Clang and when <a href="#CMAKE_BUILD_TYPE">CMAKE_BUILD_TYPE</a> is <code>Debug</code>. Then, it can be set to:</p>
<ul>
<li><code>Address</code>: This enables Clang's <code>AddressSanitizer</code></li>
<li><code>Memory</code>: This enables Clang's <code>MemorySanitizer</code></li>
<li><code>MemoryWithOrigins</code>: This enables Clang's <code>MemorySanitizer</code> with the added functionality of being able to track the origins of uninitialized values</li>
<li><code>Undefined</code>: This enables Clang's <code>UndefinedBehaviorSanitizer</code>. The <code>BLACKLIST_FILE</code> option can be additionally set to a path to a file listing the entities Clang should ignore.</li>
<li><code>Thread</code>: This enables Clang's <code>ThreadSanitizer</code></li>
<li><code>Leak</code>: This enables Clang's <code>LeakSanitizer</code></li>
</ul>
<p><b>Default</b>: Unset.</p>
<h1>OQS_ENABLE_TEST_CONSTANT_TIME</h1>
<p>This is used in conjunction with <code>tests/test_constant_time.py</code> to use Valgrind to look for instances of secret-dependent control flow. liboqs must also be compiled with <a href="#CMAKE_BUILD_TYPE">CMAKE_BUILD_TYPE</a> set to <code>Debug</code>. <br  />
</p>
<p>See the documentation in <a href="https://github.com/open-quantum-safe/liboqs/blob/main/tests/test_constant_time.py"><code>tests/test_constant_time.py</code></a> for more usage information.</p>
<p><b>Default</b>: <code>OFF</code>.</p>
<h1>OQS_STRICT_WARNINGS</h1>
<p>Can be <code>ON</code> or <code>OFF</code>. When <code>ON</code>, all compiler warnings are enabled and treated as errors. This setting is recommended to be enabled prior to submission of a Pull Request as CI runs with this setting active. When <code>OFF</code>, significantly fewer compiler warnings are enabled such as to avoid undue build errors triggered by (future) compiler warning features/unknown at the development time of this library.</p>
<p><b>Default</b>: <code>OFF</code>.</p>
<h1>OQS_EMBEDDED_BUILD</h1>
<p>Can be <code>ON</code> or <code>OFF</code>. When <code>ON</code>, calls to standard library functions typically not present in a bare-metal embedded environment are excluded from compilation.</p>
<p>At the moment, this is <b>only</b> considered for random number generation, as both <code>getentropy()</code> and a file based <code>/dev/urandom</code> are not available on embedded targets (e.g. the Zephyr port).</p>
<p><b>Attention</b>: When this option is enabled, you have to supply a custom callback for obtaining random numbers using the <code><a class="el" href="rand_8h.html#af79c03032969d61e363467f6caf56412">OQS_randombytes_custom_algorithm()</a></code> API before accessing the cryptographic API. Otherwise, all key generation and signing operations will fail.</p>
<p><b>Default</b>: <code>OFF</code>.</p>
<h1>OQS_LIBJADE_BUILD</h1>
<p>Can be <code>ON</code> or <code>OFF</code>. When <code>ON</code> liboqs is built to use high assurance implementations of cryptographic algorithms from <a href="https://github.com/formosa-crypto/libjade">Libjade</a>. The cryptographic primitives in Libjade are written using <a href="https://github.com/jasmin-lang/jasmin">Jasmin</a> and built using the Jasmin compiler. The Jasmin compiler is proven (in Coq) to preserve semantic correctness of a program, maintain secret-independence of control flow, and maintain secret independence of locations of memory access through compilation. Additionally, the Jasmin compiler guarantees thread safety because Jasmin doesn't support global variables.</p>
<p>At the moment, Libjade only provides Kyber512 and Kyber768 KEMs.</p>
<p>At the moment, libjade only supports Linux and Darwin based operating systems on x86_64 platforms.</p>
<p><b>Default</b> <code>OFF</code>.</p>
<h1>OQS_ENABLE_LIBJADE_KEM_ALG/OQS_ENABLE_LIBJADE_SIG_ALG</h1>
<p>Note: <code>ALG</code> in <code>OQS_ENABLE_LIBJADE_KEM_ALG/OQS_ENABLE_LIBJADE_SIG_ALG</code> should be replaced with the specific algorithm name as demonstrated in OQS_ENABLE_KEM_ALG/OQS_ENABLE_SIG_ALG.</p>
<p><b>Default</b>: <code>OFF</code> if OQS_LIBJADE_BUILD is <code>OFF</code> else unset. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
